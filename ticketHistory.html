<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<title>Ticket History</title>
</head>
<body>
Ticket History<br /><br />
<table id="ticket-history"></table>
<script src="yui-debug.js" type="text/javascript"></script>
<script src="wut.js"></script>
<script type="text/javascript">
var init = function(Y, WUT) {

  WUT.get({resource: "flat"}, {table:'ticket'}, function(id, o, a) {
    var TICKET = {name:"0", email:"1", phone:"2", helpTopic:"3", subject:"4", createDate:"5", status:"6"},
        ticket,
        table = a.Y.Node.get("#ticket-history");
        tableRow = [];
    for(var ticketNum in o.results) {
      ticket = o.results[ticketNum];
      tableRow.push("<tr>");
      tableRow.push("<td class='ticket-number'>");
      tableRow.push(ticketNum);
      tableRow.push("</td>");
      tableRow.push("<td class='create-date'>");
      tableRow.push(ticket[TICKET.createDate]);
      tableRow.push("</td>");
      tableRow.push("<td class='status'>");
      tableRow.push(ticket[TICKET.status]);
      tableRow.push("</td>");
      tableRow.push("<td class='subject'>");
      tableRow.push("<a href='http://api.webutilitykit.com:8000/html/pages/viewTicket.html?ticket=" + ticketNum + "'>" + o.result[ticketNum][TICKET.subject] + "</a>");
      tableRow.push("</td>");
      tableRow.push("<td class='name'>");
      tableRow.push(ticket[TICKET.name]);
      tableRow.push("</td>");
      tableRow.push("<td class='email'>");
      tableRow.push(ticket[TICKET.email]);
      tableRow.push("</td>");
      tableRow.push("</tr>");
      table.append(tableRow.join(""));
    }
  });
};

WUT(init);

</script>
</body>
</html>
